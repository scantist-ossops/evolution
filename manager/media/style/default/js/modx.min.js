!function(w,d,u){"use strict";modx.extended({frameset:"frameset",minWidth:840,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),typesactions:{16:1,301:2,78:3,22:4,102:5,108:6,3:7,4:7,6:7,27:7,61:7,62:7,63:7,72:7},thememodes:["","lightness","light","dark","darkness"],tabsTimer:0,popupTimer:0,init:function(){var e;localStorage.getItem("MODX_widthSideBar")||localStorage.setItem("MODX_widthSideBar",this.config.tree_width),this.mainmenu.init(),w.location.hash&&(modx.getActionFromUrl(w.location.hash,2)?w.history.replaceState(null,d.title,modx.MODX_MANAGER_URL):(modx.getActionFromUrl(w.location.hash)||modx.main.getQueryVariable("filemanager",w.location.hash))&&(e=modx.main.getQueryVariable("filemanager",w.location.hash)?modx.MODX_MANAGER_URL+modx.main.getQueryVariable("filemanager",w.location.hash)+w.location.hash.replace("#?","?"):w.location.href.replace("#?","?"),modx.config.global_tabs?modx.tabs({url:e,title:"blank"}):w.main?w.main.frameElement.src=e:modx.openWindow(e))),this.resizer.init(),this.search.init(),0<this.config.session_timeout&&w.setInterval(this.keepMeAlive,6e4*this.config.session_timeout),0<modx.config.mail_check_timeperiod&&modx.permission.messages&&setTimeout("modx.updateMail(true)",1e3),d.addEventListener("click",this.hideDropDown,!1),modx.config.global_tabs&&(d.addEventListener("click",this.tabs,!1),this.tabs({url:"?a=2",reload:0}))},mainmenu:{id:"mainMenu",init:function(){var r,t=d.getElementById("mainMenu");t.delegateEventListener("click","a",function(e){this.classList.contains("dropdown-toggle")&&(t.classList.contains("show")&&(this.classList.contains("selected")||!modx.isMobile&&this.parentElement.classList.contains("hover"))?(this.classList.remove("selected"),t.classList.remove("show")):(t.querySelectorAll(".nav > li > a:not(:hover)").forEach(function(e){e.classList.remove("selected")}),this.classList.add("selected"),t.classList.add("show")),e.stopPropagation(),e.target.dataset.toggle="#mainMenu",modx.hideDropDown(e)),this.closest("ul").classList.contains("dropdown-menu")&&!this.closest("li").classList.contains("dropdown-back")&&(t.querySelectorAll(".nav > .active").forEach(function(e){e.classList.remove("active")}),t.querySelectorAll(".nav li.selected").forEach(function(e){e.classList.remove("selected")}),this.closest(".nav > li").classList.add("active"),this.offsetParent.id&&d.getElementById(this.offsetParent.id.substr(7)).classList.add("selected"),(modx.isMobile||w.innerWidth<modx.minWidth)&&this.classList.contains("toggle")&&(this.parentNode.classList.add("selected"),e.stopPropagation(),e.preventDefault()))}),t.delegateEventListener("click",".nav li",function(){(modx.isMobile||w.innerWidth<modx.minWidth)&&t.querySelectorAll(".nav ul.selected").forEach(function(e){e.classList.remove("selected")})}),t.querySelectorAll(".nav > li").forEach(function(e){e.addEventListener("mouseenter",function(){t.querySelectorAll(".nav > li.hover:not(:hover)").forEach(function(e){e.classList.remove("hover")}),this.classList.add("hover")})}),t.querySelectorAll(".nav > li li").forEach(function(e){e.addEventListener("mouseenter",function(s){var n,a=this;t.querySelectorAll(".nav > li li.hover:not(:hover)").forEach(function(e){e.classList.remove("hover")}),this.classList.add("hover"),clearTimeout(r),this.offsetParent.nextElementSibling&&this.offsetParent.nextElementSibling.classList.contains("sub-menu")?n=this.offsetParent.nextElementSibling:this.offsetParent&&this.offsetParent.classList.contains("sub-menu")?n=this.offsetParent:((n=d.createElement("ul")).className="sub-menu dropdown-menu",this.parentNode.parentNode.appendChild(n)),r=setTimeout(function(){d.querySelector(".nav .sub-menu.show")&&d.querySelector(".nav .sub-menu.show").classList.remove("show"),n.style.left=a.offsetWidth+"px",a.classList.contains("dropdown-toggle")?n.id==="parent_"+a.id?(modx.isMobile?a.parentNode.classList.add("selected"):a.onclick=function(e){e.target.classList.contains("toggle")&&a.parentNode.classList.add("selected")},n.classList.add("show")):(n.classList.remove("show"),t.querySelectorAll(".nav ul.selected").forEach(function(e){e.classList.remove("selected")}),r=setTimeout(function(){var i=a.firstElementChild.href&&"main"===a.firstElementChild.target?a.firstElementChild.href.split("?")[1]+"&elements="+a.id:"";modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",i,function(e){if(e){(modx.isMobile||w.innerWidth<modx.minWidth)&&(e='<li class="dropdown-back"><span class="dropdown-item"><i class="fa fa-arrow-left"></i>'+modx.lang.paging_prev+"</span></li>"+e),n.id="parent_"+a.id,n.innerHTML=e;var e=w.location.hash.substr(2).replace(/=/g,"_").replace(/&/g,"__"),t=d.getElementById(e);t&&(t.parentNode.classList.add("selected"),d.getElementById(t.parentNode.parentNode.id.substr(7)).classList.add("selected"));for(var o=0;o<n.children.length;o++)(t=n.children[o]).classList.contains("dropdown-back")&&(t.onclick=function(e){e.target.offsetParent.previousElementSibling.classList.remove("selected"),e.target.offsetParent.classList.remove("show"),e.preventDefault(),e.stopPropagation()}),t.onmouseenter=function(e){clearTimeout(r);var t=e.target.offsetParent.querySelector("li.hover");t&&t.classList.remove("hover"),e.target.classList.add("hover"),a.classList.add("hover"),e.preventDefault(),e.stopPropagation()};n.classList.add("show"),modx.isMobile?s.target.classList.contains("toggle")&&a.parentNode.classList.add("selected"):a.onclick=function(e){e.target.classList.contains("toggle")&&a.parentNode.classList.add("selected")},setTimeout(function(){modx.mainmenu.search(i,n)},200)}})},85)):n.classList.contains("open")&&(n.classList.remove("open"),setTimeout(function(){n.parentNode.removeChild(n)},100))},85),s.preventDefault()})})},search:function(t,o){var i,s=o.querySelector("input[name=filter]"),n=-1,a=null;s&&(modx.isMobile||s.focus(),s.onkeyup=function(e){13===e.keyCode&&o.querySelector(".item.hover")?(d.body.click(),a=o.querySelector(".item.hover").firstChild,modx.tabs({url:a.href,title:a.innerHTML})):38===e.keyCode||40===e.keyCode?(s.selectionStart=s.value.length,(i=o.querySelectorAll(".item")).length&&(40===e.keyCode?n++:n--,n<0?(n=-1,(a=o.querySelector(".hover"))&&a.classList.remove("hover")):n>i.length-1&&(n=i.length-1),0<=n&&n<i.length&&((a=o.querySelector(".hover"))&&a.classList.remove("hover"),i[n].classList.add("hover")))):modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",t+"&filter="+s.value,function(e){n=-1,o.querySelectorAll(".item").forEach(function(e){e.parentNode.removeChild(e)}),o.insertAdjacentHTML("beforeend",e),o.querySelectorAll(".item").forEach(function(e){e.addEventListener("mouseenter",function(e){this.parentElement.querySelectorAll("li").forEach(function(e){e.classList.remove("hover")}),this.classList.add("hover"),e.stopPropagation()})})},"html")})}},search:{result:null,results:null,input:null,mask:null,loader:null,timer:0,init:function(){this.result=d.getElementById("searchresult"),this.input=d.getElementById("searchid"),this.mask=d.querySelector("#searchform .mask"),this.result||(this.result=d.createElement("div"),this.result.id="searchresult",d.body.appendChild(this.result)),this.loader=d.createElement("i"),this.loader.className="fa fa-refresh fa-spin fa-fw",this.input.parentNode.appendChild(this.loader),modx.config.global_tabs&&(this.input.parentNode.onsubmit=function(e){e.preventDefault(),this.target="mainsearch",modx.tabs({url:this.action,title:"Search",name:"mainsearch"}),this.submit()});var i=this;this.input.onkeyup=function(e){e.preventDefault(),clearTimeout(i.timer),""!==i.input.value.length&&2<i.input.value.length?i.timer=setTimeout(function(){i.loader.style.display="block",modx.get(modx.MODX_MANAGER_URL+"?a=71&ajax=1&submitok=Search&searchid="+i.input.value,function(e){i.loader.style.display="none",i.results=e.querySelector(".ajaxSearchResults"),i.results&&""!==i.results.innerHTML?(i.result.innerHTML=i.results.outerHTML,i.open(),i.result.onclick=function(e){var t=e.target,o=t.parentNode;"I"===t.tagName?(modx.openWindow({title:o.innerText,id:o.id,url:o.href}),e.preventDefault(),e.stopPropagation()):(t="A"===t.tagName&&t||"A"===o.tagName&&o)&&((o=i.result.querySelector(".selected"))&&(o.className=""),t.className="selected",modx.isMobile&&i.close())}):i.empty()},"document")},300):i.empty()},modx.isMobile&&(this.input.onblur=this.close),this.input.onfocus=this.open,this.input.onclick=this.open,this.input.onmouseenter=this.open,this.result.onmouseenter=this.open,this.result.onmouseleave=this.close,this.mask.onmouseenter=this.open,this.mask.onmouseleave=this.close},open:function(){modx.search.results&&modx.search.result.classList.add("open")},close:function(){modx.search.result.classList.remove("open")},empty:function(){modx.search.result.classList.remove("open"),modx.search.result.innerHTML=""}},main:{id:"main",idFrame:"mainframe",as:null,onload:function(e){w.main=e.target.contentWindow||e.target.defaultView,modx.main.tabRow.init(),modx.main.stopWork(),modx.main.scrollWork(),w.main.document.addEventListener("click",modx.hideDropDown,!1),w.main.document.addEventListener("contextmenu",modx.main.oncontextmenu,!1),modx.config.global_tabs&&w.main.document.addEventListener("click",modx.tabs,!1),w.history.replaceState(null,d.title,modx.getActionFromUrl(w.main.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.main.location.search),setTimeout("modx.tree.restoreTree()",100)},oncontextmenu:function(o){var i,s,n,e,t;o.ctrlKey||(i=o.target,1===modx.user.role&&/modxtv|modxplaceholder|modxattributevalue|modxchunk|modxsnippet|modxsnippetnocache/i.test(i.className)&&(s=Date.now(),n=i.innerText.replace(/[\[|\]|{|}|\*||\#|\+|?|\!|&|=|`|:]/g,""),e=i.className.replace(/cm-modx/,""),t=!!n.replace(/^\d+$/,""),n&&t&&(o.preventDefault(),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"modxTagHelper",name:n,type:e},function(e){if(e){for(var t in e=JSON.parse(e))e.hasOwnProperty(t)&&e[t].url&&(e[t].onclick="if(event.shiftKey){modx.openWindow({url:'"+e[t].url+"'})}else{modx.popup({url:'"+e[t].url+"',title:'"+e.header.innerHTML+"',width:'95%',height:'95%',margin:0,hide:0,hover:0,overlay:1,overlayclose:0,position:'center elements',animation:0,icon:'none'})}");e=JSON.stringify(e),i.id="node"+s,i.dataset.contextmenu=e,modx.tree.showPopup(o,s,n)}})),o.preventDefault()))},tabRow:{init:function(){var e=w.main.document.querySelector(".tab-pane > .tab-row");e&&this.build(e)},build:function(t){var e=d.createElement("div"),o=t.querySelector(".selected");e.className="tab-row-container",t.parentNode.insertBefore(e,t),e.appendChild(t);var i=d.createElement("i");i.className="fa fa-angle-left prev disable",i.onclick=function(e){e.stopPropagation(),e.preventDefault();e=t.querySelector(".selected");e.previousSibling&&(e.previousSibling.click(),modx.main.tabRow.scroll(t))},e.appendChild(i);var s=d.createElement("i");s.className="fa fa-angle-right next disable",s.onclick=function(e){e.stopPropagation(),e.preventDefault();e=t.querySelector(".selected");e.nextSibling&&(e.nextSibling.click(),modx.main.tabRow.scroll(t))},e.appendChild(s),setTimeout(function(){o=t.querySelector(".selected"),modx.main.tabRow.scroll(t,o),w.main.addEventListener("resize",function(){modx.main.tabRow.scroll(t)},!1),o&&(o.previousSibling&&i.classList.remove("disable"),o.nextSibling&&s.classList.remove("disable"))},100),t.onclick=function(e){e="H2"===e.target.tagName?e.target:"SPAN"===e.target.tagName?e.target.parentNode:null;e&&(e.previousSibling?this.parentNode.querySelector("i.prev").classList.remove("disable"):this.parentNode.querySelector("i.prev").classList.add("disable"),e.nextSibling?this.parentNode.querySelector("i.next").classList.remove("disable"):this.parentNode.querySelector("i.next").classList.add("disable"),modx.main.tabRow.scroll(this,e))}},scroll:function(e,t,o){t=t||e.querySelector(".selected")||e.firstChild,o=o||64;for(var i=0,s=e.childNodes,n=0;n<s.length;n++)i+=s[n].offsetWidth;e.scrollLeft>t.offsetLeft&&modx.animate(e,{scrollLeft:t.offsetLeft-(t.previousSibling?30:1)},o),t.offsetLeft+t.offsetWidth>e.offsetWidth+e.scrollLeft&&modx.animate(e,{scrollLeft:t.offsetLeft-e.offsetWidth+t.offsetWidth+(t.nextSibling?30:0)},o),i>e.offsetWidth&&this.drag(e)},drag:function(i){i.onmousedown=function(e){var t,o;0===e.button&&(e.preventDefault(),t=e.clientX,o=i.scrollLeft,i.ownerDocument.body.focus(),i.onmousemove=i.ownerDocument.onmousemove=function(e){5<Math.abs(e.clientX-t)&&(e.stopPropagation(),i.scrollLeft=o-(e.clientX-t),i.ownerDocument.body.classList.add("drag"))},i.onmouseup=i.ownerDocument.onmouseup=function(e){e.stopPropagation(),i.onmousemove=null,i.ownerDocument.onmousemove=null,i.ownerDocument.body.classList.remove("drag")})}}},work:function(){d.getElementById("mainloader").classList.add("show")},stopWork:function(){d.getElementById("mainloader").classList.remove("show")},scrollWork:function(){var e=w.main.frameElement.contentWindow,t=e.location.search.substring(1)||e.location.hash.substring(2),o=localStorage.getItem("page_y")||0,i=localStorage.getItem("page_url")||t;(modx.getActionFromUrl(i)===modx.getActionFromUrl(t)&&modx.main.getQueryVariable("id",i)&&modx.main.getQueryVariable("id",i)===modx.main.getQueryVariable("id",t)||i===t)&&e.scrollTo(0,o),e.addEventListener("scroll",function(){0<=this.pageYOffset&&(localStorage.setItem("page_y",this.pageYOffset.toString()),localStorage.setItem("page_url",t))},!1)},getQueryVariable:function(e,t){var o="";if(t||"string"==typeof t){t=(t=(t=t.split("?"))[1]||t[0]).split("&");for(var i=0;i<t.length;i++){var s=t[i].split("=");s[0]===e&&(o=decodeURIComponent(s[1]))}}return o}},resizer:{dragElement:null,oldZIndex:99,newZIndex:999,left:modx.config.tree_width,id:"resizer",switcher:"hideMenu",background:"rgba(0, 0, 0, 0.1)",mask:null,init:function(){var o,i,s,n;d.getElementById(modx.resizer.id)&&(modx.resizer.mask=d.createElement("div"),modx.resizer.mask.id="mask_resizer",modx.resizer.mask.style.zIndex=modx.resizer.oldZIndex,d.getElementById(modx.resizer.id).onmousedown=modx.resizer.onMouseDown,d.getElementById(modx.resizer.id).onmouseup=modx.resizer.mask.onmouseup=modx.resizer.onMouseUp,modx.isMobile&&(s=d.getElementById("tree"),n=s.offsetWidth,d.getElementById("frameset").appendChild(modx.resizer.mask),w.addEventListener("touchstart",function(e){/tab|tab\-row|tab\-row\-container/.test(e.target.className||e.target.offsetParent.className)?this.swipe=!1:(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,this.swipe=!0,this.sidebar=!d.body.classList.contains("sidebar-closed"))},!1),w.addEventListener("touchmove",function(e){var t=e.changedTouches[0];s.style.transition="none",s.style.WebkitTransition="none",modx.resizer.mask.style.transition="none",modx.resizer.mask.style.WebkitTransition="none",modx.resizer.mask.style.visibility="visible";e=t.clientX-o,t=t.clientY-i;Math.abs(e)>Math.abs(t)&&this.swipe&&(e<0&&this.sidebar?(Math.abs(e)>n&&(e=-n),s.style.transform="translate3d("+e+"px, 0, 0)",s.style.WebkitTransform="translate3d("+e+"px, 0, 0)",modx.resizer.mask.style.opacity=(.5-.5/-n*e).toFixed(2),Math.abs(e)>n/3?this.swipe="left":this.swipe="right"):0<e&&!this.sidebar&&(Math.abs(e)>n&&(e=n),s.style.transform="translate3d("+-(n-e)+"px, 0, 0)",s.style.WebkitTransform="translate3d("+-(n-e)+"px, 0, 0)",modx.resizer.mask.style.opacity=(.5/n*e).toFixed(2),Math.abs(e)>n/3?this.swipe="right":this.swipe="left"))},!1),w.addEventListener("touchend",function(){"left"===this.swipe&&(d.body.classList.add("sidebar-closed"),modx.resizer.setWidth(0)),"right"===this.swipe&&(d.body.classList.remove("sidebar-closed"),modx.resizer.setWidth(n)),s.style.cssText="",modx.resizer.mask.style.cssText=""},!1)))},onMouseDown:function(e){if(e=e||w.event,modx.resizer.dragElement=null!==e.target?e.target:e.srcElement,(1===e.buttons||0===e.button)&&modx.resizer.dragElement.id===modx.resizer.id)return modx.resizer.oldZIndex=modx.resizer.dragElement.style.zIndex,modx.resizer.dragElement.style.zIndex=modx.resizer.newZIndex,modx.resizer.dragElement.style.background=modx.resizer.background,localStorage.setItem("MODX_widthSideBar",0<modx.resizer.dragElement.offsetLeft?modx.resizer.dragElement.offsetLeft:0),d.body.appendChild(modx.resizer.mask),d.onmousemove=modx.resizer.onMouseMove,d.body.focus(),d.body.classList.add("resizer_move"),d.onselectstart=function(){return!1},!(modx.resizer.dragElement.ondragstart=function(){return!1})},onMouseMove:function(e){0<(e=e||w.event).clientX?modx.resizer.left=e.clientX:modx.resizer.left=0,modx.resizer.dragElement.style.left=modx.pxToRem(modx.resizer.left)+"rem",d.getElementById("tree").style.width=modx.pxToRem(modx.resizer.left)+"rem",d.getElementById("main").style.left=modx.pxToRem(modx.resizer.left)+"rem",(e.clientX<-2||e.clientY<-2)&&modx.resizer.onMouseUp(e)},onMouseUp:function(e){null!==modx.resizer.dragElement&&0===e.button&&modx.resizer.dragElement.id===modx.resizer.id&&(0<e.clientX?(d.body.classList.remove("sidebar-closed"),modx.resizer.left=e.clientX):(d.body.classList.add("sidebar-closed"),modx.resizer.left=0),d.cookie="MODX_widthSideBar="+modx.pxToRem(modx.resizer.left),modx.resizer.dragElement.style.zIndex=modx.resizer.oldZIndex,modx.resizer.dragElement.style.background="",modx.resizer.dragElement.ondragstart=null,modx.resizer.dragElement=null,d.body.classList.remove("resizer_move"),d.body.removeChild(modx.resizer.mask),d.onmousemove=null,d.onselectstart=null)},toggle:function(){var e;modx.isMobile||w.innerWidth<=modx.minWidth?d.body.classList.contains("sidebar-closed")?(d.body.classList.remove("sidebar-closed"),localStorage.setItem("MODX_widthSideBar",0),d.cookie="MODX_widthSideBar="+modx.pxToRem(parseInt(d.getElementById("tree").offsetWidth))):(localStorage.setItem("MODX_widthSideBar",parseInt(d.getElementById("tree").offsetWidth)),d.body.classList.add("sidebar-closed"),d.cookie="MODX_widthSideBar=0"):(e=0!==d.getElementById("tree").offsetWidth?0:parseInt(localStorage.getItem("MODX_widthSideBar"))?parseInt(localStorage.getItem("MODX_widthSideBar")):modx.config.tree_width,modx.resizer.setWidth(e))},setWidth:function(e){0<e?(localStorage.setItem("MODX_widthSideBar",0),d.body.classList.remove("sidebar-closed")):(localStorage.setItem("MODX_widthSideBar",parseInt(d.getElementById("tree").offsetWidth)),d.body.classList.add("sidebar-closed")),d.cookie="MODX_widthSideBar="+modx.pxToRem(e),d.getElementById("tree").style.width=modx.pxToRem(e)+"rem",d.getElementById("resizer").style.left=modx.pxToRem(e)+"rem",d.getElementById("main").style.left=modx.pxToRem(e)+"rem"},setDefaultWidth:function(){modx.resizer.setWidth(modx.remToPx(modx.config.tree_width))}},tree:{ctx:null,rpcNode:null,itemToChange:"",selectedObjectName:null,selectedObject:0,selectedObjectDeleted:0,selectedObjectUrl:"",drag:!1,deleted:[],init:function(){this.restoreTree()},draggable:function(){if(modx.permission.dragndropdocintree)for(var e=d.querySelectorAll("#treeRoot a:not(.empty)"),t=0;t<e.length;t++){var o=e[t];o.onmousedown=this.onmousedown,o.ondragstart=this.ondragstart,o.ondragenter=this.ondragenter,o.ondragover=this.ondragover,o.ondragleave=this.ondragleave,o.ondrop=this.ondrop}},onmousedown:function(e){if(e.ctrlKey)return this.parentNode.removeAttribute("draggable"),!0;var t=this.dataset.roles+("treeRoot"!==this.parentNode.parentNode.id?this.parentNode.parentNode.previousSibling.dataset.roles:""),e=!1,e=""==t||t.split(",").map(Number).filter(function(e){return~modx.user.groups.indexOf(parseInt(e))}).length,e=!t||1===modx.user.role||e;modx.tree.itemToChange=this.dataset.id||this.parentNode.id.replace("node",""),modx.tree.selectedObjectName=this.dataset.titleEsc,e?(this.parentNode.draggable=!0,this.parentNode.ondragstart=modx.tree.ondragstart):(this.parentNode.draggable=!1,this.parentNode.ondragstart=function(){return!1})},ondragstart:function(e){e.dataTransfer.effectAllowed="all",e.dataTransfer.dropEffect="all",e.dataTransfer.setData("text",this.id.substr(4))},ondragenter:function(e){d.getElementById("node"+modx.tree.itemToChange)===(this.parentNode.closest("#node"+modx.tree.itemToChange)||this.parentNode)?(this.parentNode.className="",e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none",modx.tree.drag=!1):(this.parentNode.className="dragenter",e.dataTransfer.effectAllowed="copy",e.dataTransfer.dropEffect="copy",modx.tree.drag=!0),e.preventDefault()},ondragover:function(e){var t;modx.tree.drag?(t=e.clientY-parseInt(this.getBoundingClientRect().top))>this.offsetHeight/1.51?(this.parentNode.classList.add("dragafter"),this.parentNode.classList.remove("dragbefore"),this.parentNode.classList.remove("dragenter"),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"):t<this.offsetHeight/3?(this.parentNode.classList.add("dragbefore"),this.parentNode.classList.remove("dragafter"),this.parentNode.classList.remove("dragenter"),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"):(this.parentNode.classList.add("dragenter"),this.parentNode.classList.remove("dragafter"),this.parentNode.classList.remove("dragbefore"),e.dataTransfer.effectAllowed="copy",e.dataTransfer.dropEffect="copy"):(e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none",modx.tree.drag=!1),e.preventDefault()},ondragleave:function(e){this.parentNode.className="",this.parentNode.removeAttribute("draggable"),e.preventDefault()},ondrop:function(e){var t=d.getElementById("node"+modx.tree.itemToChange),o=null,i=modx.tree.itemToChange,s=0,n=[],a=0,r=t.firstChild.querySelector(".indent"),l=0;if(r.innerHTML="",t.removeAttribute("draggable"),this.parentNode.classList.contains("dragenter")){for(s=parseInt(this.parentNode.id.substr(4)),a=parseInt(this.dataset.level)+1,l=0;l<a;l++)r.innerHTML+="<i></i>";if(this.nextSibling)for(this.nextSibling.innerHTML?this.nextSibling.appendChild(t):t.parentNode.removeChild(t),o=this.parentNode.lastChild.children,l=0;l<o.length;l++)n[l]=o[l].id.substr(4);else t.parentNode.removeChild(t),d.querySelector("#node"+s+" .icon").innerHTML=parseInt(this.dataset.private)?modx.style.tree_folder_secure:modx.style.tree_folder;modx.tree.ondragupdate(this,i,s,n)}if(this.parentNode.classList.contains("dragafter")){for(s=/node/.test(this.parentNode.parentNode.parentNode.id)?parseInt(this.parentNode.parentNode.parentNode.id.substr(4)):0,a=parseInt(this.dataset.level),l=0;l<a;l++)r.innerHTML+="<i></i>";for(this.parentNode.parentNode.insertBefore(t,this.parentNode.nextSibling),o=this.parentNode.parentNode.children,l=0;l<o.length;l++)n[l]=o[l].id.substr(4);modx.tree.ondragupdate(this,i,s,n)}if(this.parentNode.classList.contains("dragbefore")){for(s=/node/.test(this.parentNode.parentNode.parentNode.id)?parseInt(this.parentNode.parentNode.parentNode.id.substr(4)):0,a=parseInt(this.dataset.level),l=0;l<a;l++)r.innerHTML+="<i></i>";for(this.parentNode.parentNode.insertBefore(t,this.parentNode),o=this.parentNode.parentNode.children,l=0;l<o.length;l++)n[l]=o[l].id.substr(4);modx.tree.ondragupdate(this,i,s,n)}this.parentNode.removeAttribute("class"),this.parentNode.removeAttribute("draggable"),e.preventDefault()},ondragupdate:function(e,t,o,i){var s=e.dataset.roles+("treeRoot"!==e.parentNode.parentNode.id?e.parentNode.parentNode.previousSibling.dataset.roles:""),e=!1;if(e=""==s||s.split(",").map(Number).filter(function(e){return~modx.user.groups.indexOf(parseInt(e))}).length,s&&1!==modx.user.role&&!e)return alert(modx.lang.error_no_privileges),void modx.tree.restoreTree();modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"movedocument",id:t,parent:o,menuindex:i},function(e){e?.errors&&alert(e.errors),modx.tree.restoreTree()},"json");s=w.main.frameElement.contentWindow.location.search.substr(1);modx.getActionFromUrl(s,27)&&parseInt(modx.main.getQueryVariable("id",s))===parseInt(t)&&(e=i.indexOf(t),s=w.main.document.querySelector("#documentPane input[name=menuindex]"),i=w.main.document.querySelector("#documentPane input[name=parent]"),t=w.main.document.querySelector("#documentPane #parentName"),s&&0<=e&&(s.value=e),i&&t&&(i.value=o,t.innerHTML=o+" ("+d.querySelector("#node"+o+" > a").dataset.titleEsc+")"))},toggleTheme:function(){var e,t,o=1,i=w.main.myCodeMirrors;for(t in void 0===localStorage.MODX_themeMode&&(localStorage.MODX_themeMode=modx.config.theme_mode),modx.thememodes[parseInt(localStorage.MODX_themeMode)+1]&&(o=parseInt(localStorage.MODX_themeMode)+1),e=modx.thememodes[o],modx.thememodes)modx.thememodes[t]&&(d.body.classList.remove(modx.thememodes[t]),w.main.document.body.classList.remove(modx.thememodes[t]));if(d.body.classList.add(e),w.main.document.body.classList.add(e),d.cookie="MODX_themeMode="+o,localStorage.MODX_themeMode=o,void 0!==i)for(t in i)i.hasOwnProperty(t)&&(~e.indexOf("dark")?(w.main.document.getElementsByName(t)[0].nextElementSibling.classList.add("cm-s-"+i[t].options.darktheme),w.main.document.getElementsByName(t)[0].nextElementSibling.classList.remove("cm-s-"+i[t].options.defaulttheme)):(w.main.document.getElementsByName(t)[0].nextElementSibling.classList.remove("cm-s-"+i[t].options.darktheme),w.main.document.getElementsByName(t)[0].nextElementSibling.classList.add("cm-s-"+i[t].options.defaulttheme)))},toggleNode:function(e,t){var o,i,s,n,a;(e=e||w.event).ctrlKey||(e.stopPropagation(),o=d.getElementById("node"+t).firstChild,this.rpcNode=o.nextSibling,i=o.querySelector(".toggle"),s=o.querySelector(".icon"),""===this.rpcNode.innerHTML?(i&&(i.innerHTML=o.dataset.iconCollapsed),s.innerHTML=o.dataset.iconFolderOpen,n=this.rpcNode.innerHTML,a=modx.lang.loading_doc_tree,modx.openedArray[t]=1,(""===n||0<n.indexOf(a))&&(a=this.getFolderState(),d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent="+o.dataset.indent+"&parent="+t+"&expandAll="+o.dataset.expandall+a,function(e){modx.tree.rpcLoadData(e),modx.tree.draggable()}))):(i&&(i.innerHTML=o.dataset.iconExpanded),s.innerHTML=o.dataset.iconFolderClose,delete modx.openedArray[t],this.rpcNode.style.overflow="hidden",modx.animate(this.rpcNode.firstChild,{marginTop:-this.rpcNode.offsetHeight},64,function(){this.parentNode.innerHTML=""})),this.saveFolderState(),e.preventDefault())},rpcLoadData:function(e){null!==this.rpcNode&&(this.rpcNode.innerHTML="object"==typeof e?e.responseText:e,this.rpcNode.loaded=!0,"DIV"===this.rpcNode.firstChild.tagName?("treeRoot"===this.rpcNode.id?d.getElementById("binFull")?this.showBin(!0):this.showBin(!1):(this.rpcNode.style.overflow="hidden",this.rpcNode.firstElementChild.style.marginTop=-this.rpcNode.offsetHeight+"px",modx.animate(this.rpcNode.firstChild,{marginTop:0},64)),d.getElementById("treeloader").classList.remove("visible")):d.getElementById("loginfrm")&&(this.rpcNode.parentNode.removeChild(this.rpcNode),w.location.href=modx.MODX_MANAGER_URL))},treeAction:function(e,t,o){if(!e.ctrlKey){var i,s=d.getElementById("node"+t).firstChild,n=s.dataset.treepageclick,a=parseInt(s.dataset.showchildren),r=parseInt(s.dataset.openfolder);if(o=o||s.dataset&&s.dataset.titleEsc,"move"===tree.ca)try{this.setSelectedByContext(t),w.main.setMoveValue(t,o)}catch(e){alert(modx.lang.unable_set_parent)}if("open"!==tree.ca&&""!==tree.ca||(0===t?i="?a=2":(i="",i=!isNaN(n)&&isFinite(n)?"?a="+n+"&r=1&id="+t+(0===r?this.getFolderState():""):n,2===r&&(1!==a&&(i=""),this.toggleNode(e,t))),i&&(e.shiftKey?(w.getSelection().removeAllRanges(),modx.openWindow(i),this.restoreTree()):(modx.tabs({url:modx.MODX_MANAGER_URL+i,title:o+"<small>("+t+")</small>"}),modx.isMobile&&w.innerWidth<modx.minWidth&&modx.resizer.toggle())),this.itemToChange=t,this.setSelected(t)),"parent"===tree.ca)try{this.setSelectedByContext(t),w.main.setParent(t,o)}catch(e){alert(modx.lang.unable_set_parent)}if("link"===tree.ca)try{this.setSelectedByContext(t),w.main.setLink(t)}catch(e){alert(modx.lang.unable_set_link)}e.preventDefault()}},showPopup:function(e,id,title){if(!e.ctrlKey){e.preventDefault();var tree=d.getElementById("tree"),el=d.getElementById("node"+id)||e.target,x=0,y=0;if(el.firstChild&&el.firstChild.dataset&&el.firstChild.dataset.contextmenu&&(el=el.firstChild),el){if(el.dataset.contextmenu){e.target.dataset.toggle="#contextmenu",modx.hideDropDown(e),this.ctx=d.createElement("div"),this.ctx.id="contextmenu",this.ctx.className="dropdown-menu",d.getElementById(modx.frameset).appendChild(this.ctx),this.setSelectedByContext(id);var dataJson=JSON.parse(el.dataset.contextmenu),key;for(key in dataJson)if(dataJson.hasOwnProperty(key)){var item=d.createElement("div"),k,onEvent;for(k in dataJson[key]){dataJson[key].hasOwnProperty(k)&&("on"===k.substring(0,2)?(onEvent=dataJson[key][k],item[k]=function(onEvent){return function(event){eval(onEvent)}}(onEvent)):item[k]=dataJson[key][k])}0===key.indexOf("header")&&(item.className+=" menuHeader"),0===key.indexOf("item")&&(item.className+=" menuLink"),0!==key.indexOf("seperator")&&0!==key.indexOf("separator")||(item.className+=" seperator separator"),this.ctx.appendChild(item)}x=0<e.clientX?e.clientX:e.pageX,y=0<e.clientY?e.clientY:e.pageY,e.view.position=(e.view.frameElement||e.target.offsetParent).getBoundingClientRect(),e.view.frameElement?(x+=e.view.position.left,y+=e.view.frameElement.offsetParent.offsetTop):e.target.parentNode.parentNode.classList.contains("node")&&(x+=50),x>e.view.position.width&&(x=e.view.position.width-this.ctx.offsetWidth),y+this.ctx.offsetHeight/2>e.view.position.height?y=e.view.position.height-this.ctx.offsetHeight-5:y-this.ctx.offsetHeight/2<e.view.position.top?y=e.view.position.top+5:y-=this.ctx.offsetHeight/2,this.itemToChange=id,this.selectedObjectName=title,this.dopopup(this.ctx,x+10,y)}else{el=el.firstChild;var ctx=d.getElementById("mx_contextmenu");e.target.dataset.toggle="#mx_contextmenu",modx.hideDropDown(e),this.setSelectedByContext(id);var i4=d.getElementById("item4"),i5=d.getElementById("item5"),i8=d.getElementById("item8"),i9=d.getElementById("item9"),i10=d.getElementById("item10"),i11=d.getElementById("item11");1===modx.permission.publish_document?(i9.style.display="block",i10.style.display="block",1===parseInt(el.dataset.published)?i9.style.display="none":i10.style.display="none"):i5&&(i5.style.display="none"),1===modx.permission.delete_document&&(i4.style.display="block",i8.style.display="block",1===parseInt(el.dataset.deleted)?(i4.style.display="none",i9.style.display="none",i10.style.display="none"):i8.style.display="none"),i11&&(1===parseInt(el.dataset.isfolder)?i11.style.display="block":i11.style.display="none");var bodyHeight=tree.offsetHeight+tree.offsetTop,x=0<e.clientX?e.clientX:e.pageX,y=0<e.clientY?e.clientY:e.pageY;y+ctx.offsetHeight/2>bodyHeight?y=bodyHeight-ctx.offsetHeight-5:y-ctx.offsetHeight/2<tree.offsetTop?y=tree.offsetTop+5:y-=ctx.offsetHeight/2,e.target.parentNode.parentNode.classList.contains("node")&&(x+=50),this.itemToChange=id,this.selectedObjectName=title,ctx.classList.contains("show")?(ctx.classList.remove("show"),setTimeout(function(){modx.tree.dopopup(ctx,x+10,y)},100)):this.dopopup(ctx,x+10,y)}e.stopPropagation()}}},dopopup:function(e,t,o){30<this.selectedObjectName.length&&(this.selectedObjectName=this.selectedObjectName.substr(0,30)+"..."),d.getElementById("nameHolder").innerHTML=this.selectedObjectName,e.style.left=t+(modx.config.textdir?"-190":"")+"px",e.style.top=o+"px",e.classList.add("show")},menuHandler:function(e){switch(e){case 1:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=3&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 2:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=27&r=1&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 3:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=4&pid="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 4:this.selectedObjectDeleted?alert('"'+this.selectedObjectName+'" '+modx.lang.already_deleted):!0===confirm('"'+this.selectedObjectName+'"\n\n'+modx.lang.confirm_delete_resource)&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=6&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 5:this.setActiveFromContextMenu(this.itemToChange),modx.tabs({url:modx.MODX_MANAGER_URL+"?a=51&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 6:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=72&pid="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 7:!0===confirm(modx.lang.confirm_resource_duplicate)&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=94&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 8:d.getElementById("node"+this.itemToChange).firstChild.dataset.deleted?!0===confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_undelete)&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=63&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"}):alert('"'+this.selectedObjectName+'"'+modx.lang.not_deleted);break;case 9:!0===confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_publish)&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=61&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 10:this.itemToChange!==modx.config.site_start?!0===confirm('"'+this.selectedObjectName+'" '+modx.lang.confirm_unpublish)&&modx.tabs({url:modx.MODX_MANAGER_URL+"?a=62&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"}):alert("Document is linked to site_start variable and cannot be unpublished!");break;case 11:modx.tabs({url:modx.MODX_MANAGER_URL+"?a=56&id="+this.itemToChange,title:this.selectedObjectName+"<small>("+this.itemToChange+")</small>"});break;case 12:w.open(d.getElementById("node"+this.itemToChange).firstChild.dataset.href,"previeWin");break;default:alert("Unknown operation command.")}},setSelected:function(e){var t=d.querySelector("#tree .current");t&&t.classList.remove("current"),e&&("object"==typeof e?e.classList.add("current"):(t=d.querySelector("#node"+e+">.node")||d.getElementById("node"+e))&&t.classList.add("current"))},setActiveFromContextMenu:function(e){e=d.querySelector("#node"+e+">.node");e&&this.setSelected(e)},setSelectedByContext:function(e){var t=d.querySelector("#treeRoot .selected");t&&t.classList.remove("selected"),(t=d.querySelector("#node"+e+">.node"))&&t.classList.add("selected")},setItemToChange:function(){var e=w.main.document&&(w.main.document.URL||w.main.document.location.search),t=modx.getActionFromUrl(e);e&&modx.typesactions[t]?this.itemToChange=(7===modx.typesactions[t]?"":modx.typesactions[t]+"_")+parseInt(modx.main.getQueryVariable("id",e)):this.itemToChange="",this.setSelected(this.itemToChange)},restoreTree:function(){d.getElementById("treeRoot")&&(d.getElementById("treeloader").classList.add("visible"),this.setItemToChange(),this.rpcNode=d.getElementById("treeRoot"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=2&id="+this.itemToChange,function(e){modx.tree.rpcLoadData(e),modx.tree.draggable()}))},expandTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=1&id="+this.itemToChange,function(e){modx.tree.rpcLoadData(e),modx.tree.saveFolderState(),modx.tree.draggable()})},collapseTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible"),modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&indent=1&parent=0&expandAll=0&id="+this.itemToChange,function(e){modx.openedArray=[],modx.tree.saveFolderState(),modx.tree.rpcLoadData(e),modx.tree.draggable()})},updateTree:function(){this.rpcNode=d.getElementById("treeRoot"),d.getElementById("treeloader").classList.add("visible");var e=d.sortFrm,e="a=1&f=nodes&indent=1&parent=0&expandAll=2&dt="+e.dt.value+"&tree_sortby="+e.sortby.value+"&tree_sortdir="+e.sortdir.value+"&tree_nodename="+e.nodename.value+"&id="+this.itemToChange+"&showonlyfolders="+e.showonlyfolders.value;modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",e,function(e){modx.tree.rpcLoadData(e),modx.tree.draggable()})},getFolderState:function(){var e;if(modx.openedArray!==[0])for(var t in e="&opened=",modx.openedArray)modx.openedArray[t]&&(e+=t+"|");else e="&opened=";return e},saveFolderState:function(){modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php","a=1&f=nodes&savestateonly=1"+this.getFolderState())},showSorter:function(e){e=e||w.event;var t=d.getElementById("floater");e.target.dataset.toggle="#floater",t.classList.toggle("show"),t.onclick=function(e){e.stopPropagation()}},emptyTrash:function(){!0===confirm(modx.lang.confirm_empty_trash)&&modx.get(modx.MODX_MANAGER_URL+"?a=64",function(){modx.tabsClose(modx.tree.deleted),modx.tree.deleted=[],modx.tree.restoreTree()})},showBin:function(e){var t=d.getElementById("treeMenu_emptytrash");if(t)if(e){t.title=modx.lang.empty_recycle_bin,t.classList.remove("disabled"),t.innerHTML=modx.style.empty_recycle_bin,t.onclick=function(){modx.tree.emptyTrash()};for(var o=d.getElementById("tree").querySelectorAll(".deleted"),i=0;i<o.length;i++)this.deleted[o[i].dataset.id]="evo-tab-page-"+modx.urlToUid("a=27&id="+o[i].dataset.id)}else t.title=modx.lang.empty_recycle_bin_empty,t.classList.add("disabled"),t.innerHTML=modx.style.empty_recycle_bin_empty,t.onclick=null},unlockElement:function(e,t,o){var i=modx.lockedElementsTranslation.msg.replace("[+id+]",t).replace("[+element_type+]",modx.lockedElementsTranslation["type"+e]);!0===confirm(i)&&modx.get(modx.MODX_MANAGER_URL+"?a=67&type="+e+"&id="+t,function(e){1===parseInt(e)?o.parentNode.removeChild(o):alert(e)})},resizeTree:function(){}},removeLocks:function(){!0===confirm(modx.lang.confirm_remove_locks)&&modx.get(modx.MODX_MANAGER_URL+"?a=67",function(){modx.tree.restoreTree()})},keepMeAlive:function(){modx.get("includes/session_keepalive.php?tok="+d.getElementById("sessTokenInput").value+"&o="+Math.random(),function(e){"ok"!==(e=JSON.parse(e)).status&&(w.location.href=modx.MODX_MANAGER_URL+"?a=8")})},updateMail:function(e){try{e&&this.post(modx.MODX_MANAGER_URL,{updateMsgCount:!0},function(e){var t=e.split(","),e=d.getElementById("msgCounter");0<t[0]?e&&(e.innerHTML=t[0],e.style.display="block"):e&&(e.style.display="none"),0<t[1]&&(e=d.getElementById("newMail"))&&(e.innerHTML='<a href="javascript:;" onclick="modx.tabs({url:\''+modx.MODX_MANAGER_URL+"?a=10',title:'"+modx.lang.inbox+"'});\">"+modx.style.email+modx.lang.inbox+" ("+t[0]+" / "+t[1]+")</a>",e.style.display="block"),0<modx.config.mail_check_timeperiod&&setTimeout("modx.updateMail(true)",1e3*modx.config.mail_check_timeperiod)})}catch(e){setTimeout("modx.updateMail(true)",1e3*modx.config.mail_check_timeperiod)}},openWindow:function(e){"object"!=typeof e&&(e={url:e}),e.width||(e.width=parseInt(.9*w.innerWidth)+"px"),e.height||(e.height=parseInt(.8*w.innerHeight)+"px"),e.left||(e.left=parseInt(.05*w.innerWidth)+"px"),e.top||(e.top=parseInt(.1*w.innerHeight)+"px"),e.title||(e.title=Math.floor(999999*Math.random()+1)),e.url&&(1===this.plugins.EVOmodal?top.EVO.modal.show(e):w.open(e.url,e.title,"width="+e.width+",height="+e.height+",top="+e.top+",left="+e.left+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no"))},tabsClose:function(e){if(modx.config.global_tabs&&e)for(var t in e){var o;!e.hasOwnProperty(t)||(o=d.getElementById(e[t]))&&(o.firstElementChild.contentWindow.documentDirty=!1,o.close())}},tabs:function(e){function t(e){var t=this;this.url=e.url,this.title=e.title||"",this.name=e.name||"",this.timer=null,this.olduid="",this.closeactions=[6,61,62,63,94],this.saveAndCloseActions=[75,86,99,106],this.reload=void 0!==e.reload?e.reload:1,this.action=modx.getActionFromUrl(e.url),this.uid=modx.getActionFromUrl(e.url,2)?"home":modx.urlToUid(e.url),this.page=d.getElementById("evo-tab-page-"+this.uid),this.row=d.getElementsByClassName("evo-tab-row")[0].firstElementChild,this.tab=d.getElementById("evo-tab-"+this.uid),this.page?"home"===this.uid?this.reload?(this.page.firstElementChild.src=this.url,this.show()):(this.reload=1,null===this.tab.onclick&&(this.tab.onclick=function(e){t.select.call(t,e,this)}),this.tab.show=function(e){t.show.call(t,e)},modx.tabs.selected=this.tab):(this.show(),~this.closeactions.indexOf(this.action)&&(this.setDocPublished(),modx.get(this.url,function(){modx.tree.restoreTree()}))):~this.closeactions.indexOf(this.action)?modx.get(this.url,function(){modx.tree.restoreTree()}):this.create()}if(t.prototype={create:function(){var t=this;modx.main.work(),modx.tabs.selected=this.row.querySelector(".selected"),modx.tabs.selected&&(d.getElementById(modx.tabs.selected.id.replace("tab","tab-page")).classList.remove("show"),modx.tabs.selected.classList.remove("selected")),this.page=d.createElement("div"),this.page.id="evo-tab-page-"+this.uid,this.page.className="evo-tab-page iframe-scroller show",/iPhone|iPad|iPod/i.test(navigator.userAgent)?this.page.innerHTML='<iframe class="tabframes" src="'+this.url+'" name="'+this.name+'" width="100%" height="100%" scrolling="no" frameborder="0"></iframe>':this.page.innerHTML='<iframe class="tabframes" src="'+this.url+'" name="'+this.name+'" width="100%" height="100%" scrolling="auto" frameborder="0"></iframe>',d.getElementById("main").appendChild(this.page),this.page.firstElementChild.onload=function(e){t.onload.call(t,e)},this.tab=d.createElement("h2"),this.tab.id="evo-tab-"+this.uid,this.tab.className="tab selected",this.icon="",/<i/.test(this.title)||(this.icon='<i class="'+modx.setTypeIcon(this.action)+'"></i>'),this.tab.innerHTML='<span class="tab-title" title="'+this.title.replace(/<\/?[^>]+>/g,"")+'">'+this.icon+this.title+'</span><span class="tab-close">×</span>',this.row.appendChild(this.tab),this.tab.onclick=function(e){t.select.call(t,e,this)},this.tab.close=function(e){t.close.call(t,e)},this.tab.show=function(e){t.show.call(t,e)},this.page.close=function(e){t.close.call(t,e)}},onload:function(e){var t,o=this;w.main=e.target.contentWindow||e.target.defaultView,this.url=w.main.location.search||w.location.hash.substring(1),this.olduid=this.uid,this.uid=modx.urlToUid(this.url),w.main.__alertQuit?(w.main.alert=function(e){},t=w.main.document.body.innerHTML,w.main.document.body.style.display="none",history.pushState(null,d.title,modx.getActionFromUrl(w.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.location.search),w.onpopstate=function(){history.go(1)},modx.popup({type:"warning",title:"MODX :: Alert",position:"top center alertQuit",content:t,wrap:"body"}),modx.getLockedElements(modx.getActionFromUrl(this.url),modx.main.getQueryVariable("id",this.url),function(e){e?(o.page.close(),modx.tree.restoreTree()):(w.main.location.href=modx.MODX_MANAGER_URL+o.url,w.history.replaceState(null,d.title,modx.getActionFromUrl(o.url,2)?modx.MODX_MANAGER_URL:"#"+o.url))}),modx.main.stopWork()):modx.getActionFromUrl(this.url,2)||~this.saveAndCloseActions.indexOf(modx.getActionFromUrl(this.url))&&parseInt(modx.main.getQueryVariable("r",this.url))?this.close(e):this.olduid!==this.uid&&d.getElementById("evo-tab-"+this.uid)?(this.close(e),d.getElementById("evo-tab-"+this.uid).show()):(this.title=w.main.document.body.querySelectorAll("h1")[0]&&w.main.document.body.querySelectorAll("h1")[0].innerHTML||this.title,this.title&&"home"!==this.uid&&(this.tab.innerHTML='<span class="tab-title" title="'+this.title.replace(/<\/?[^>]+>/g,"")+'">'+this.title+'</span><span class="tab-close">×</span>'),this.page.id="evo-tab-page-"+this.uid,this.tab.id="evo-tab-"+this.uid,this.tab.classList.remove("changed"),this.show(),modx.main.onload(e),w.main.document.addEventListener("click",function e(t){void 0!==t.view.documentDirty&&t.view.documentDirty&&!o.tab.classList.contains("changed")&&(o.tab.classList.add("changed"),this.removeEventListener(t.type,e,!1))},!1),w.main.document.addEventListener("keyup",function e(t){void 0!==t.view.documentDirty&&t.view.documentDirty&&!o.tab.classList.contains("changed")&&(o.tab.classList.add("changed"),this.removeEventListener(t.type,e,!1))},!1))},show:function(){modx.tabs.selected=this.row.querySelector(".selected"),modx.tabs.selected&&modx.tabs.selected!==this.tab&&(d.getElementById(modx.tabs.selected.id.replace("tab","tab-page")).classList.remove("show"),modx.tabs.selected.classList.remove("selected")),this.page.classList.add("show"),this.tab.classList.add("selected"),modx.tabs.selected=this.tab,w.main=this.page.firstElementChild.contentWindow,w.history.replaceState(null,w.main.document.title,modx.getActionFromUrl(w.main.location.search,2)?modx.MODX_MANAGER_URL:"#"+w.main.location.search),modx.tree.setItemToChange(),modx.main.tabRow.scroll(this.row,this.tab,350)},close:function(e){var t=this.page.firstElementChild.contentWindow.documentDirty,o=!!this.page.firstElementChild.contentWindow.checkDirt;(t&&o&&confirm(this.page.firstElementChild.contentWindow.checkDirt(e))||!t)&&(modx.tabs.selected===this.tab&&(tree.ca="open"),modx.tabs.selected=this.tab.classList.contains("selected")?this.tab.previousElementSibling:this.row.querySelector(".selected"),this.page.parentNode.removeChild(this.page),this.row.removeChild(this.tab),modx.tabs.selected.show())},select:function(e){var t;"tab-close"===e.target.className?this.close(e):modx.tabs.selected===this.tab?(t=this).timer?(clearTimeout(this.timer),this.timer=null,w.main.location.reload()):this.timer=setTimeout(function(){t.timer=null},250):this.show()},setDocPublished:function(){var e=w.main.document.getElementsByName("publishedcheck")[0];e&&(e.checked=61===this.action,w.main.document.getElementsByName("published")[0].value=+e.checked),modx.getActionFromUrl(w.main.location.search,3)&&w.main.location.reload()}},modx.config.global_tabs){if(void 0===e.currentTarget)return new t(e);var o=e;0===o.button&&o.target&&("A"===o.target.tagName&&"main"===o.target.target||o.target.parentNode&&"A"===o.target.parentNode.tagName&&"main"===o.target.parentNode.target)&&(e="A"===o.target.tagName&&o.target||"A"===o.target.parentNode.tagName&&o.target.parentNode,o.shiftKey?modx.openWindow({url:e.href}):modx.tabs({url:e.href,title:e.innerHTML}),o.preventDefault())}else e.url&&(w.main?w.main.frameElement.src=e.url:modx.openWindow(e.url))},popup:function(t){if("object"==typeof t&&(t.url||t.content||t.text)){var e,o,i={addclass:"",animation:"fade",content:t.content||t.text||"",clickclose:0,closeall:0,data:"",dataType:"document",delay:5e3,draggable:!1,event:null,height:"auto",hide:1,hover:1,icon:"",iframe:"iframe",margin:".5rem",maxheight:"",method:"GET",overlay:0,overlayclose:0,position:"center",resize:!1,selector:"",showclose:1,target:"main",uid:"",type:"default",title:"",url:"",width:"20rem",wrap:t.wrap||w.main.document.body,zIndex:10500,w:null,show:function(){~i.position.indexOf("center")&&(i.event?(i.el.style.left=i.event.clientX+i.mt+"px",i.el.style.bottom=i.w.innerHeight-i.el.offsetHeight-i.event.clientY+i.mt+"px"):(i.el.style.left=/(%)/.test(i.width)?(100-parseInt(i.width))/2-i.mt/(i.w.innerWidth/100)+"%":(i.w.innerWidth-i.el.offsetWidth)/2-i.mt+"px",i.el.style.bottom=/(%)/.test(i.height)?(100-parseInt(i.height))/2-i.mt/(i.w.innerHeight/100)+"%":(i.w.innerHeight-i.el.offsetHeight-i.wrap.offsetTop)/2-i.mt+"px")),~i.position.indexOf("left")&&(i.el.style.left=0),~i.position.indexOf("right")?i.el.style.right=0:i.el.style.right="auto",~i.position.indexOf("top")?(i.el.style.top=0,i.el.style.bottom=""):i.el.style.top="auto",~i.position.indexOf("bottom")&&(i.el.style.bottom=0),i.calc(),i.el.className+=" in",i.showclose&&(i.el.querySelector(".close").onclick=i.close),i.hide&&(i.el.timer=setTimeout(function(){clearTimeout(i.el.timer),i.close()},i.delay)),i.hover&&(i.el.onmouseenter=function(){clearTimeout(i.el.timer)},i.el.onmouseleave=i.close),i.overlayclose&&i.o&&(i.o.onclick=i.close),i.clickclose&&(i.el.onclick=i.close),i.draggable&&modx.dragging(i.el,{wrap:i.wrap,resize:i.resize})},close:function(e){var t;i.event=e||i.event||w.event,i.url&&"iframe"===i.iframe?!i.wrap.ownerDocument.querySelectorAll("."+i.className+".in")||((t=i.el.lastElementChild.firstElementChild.contentWindow.documentDirty)&&confirm(i.el.lastElementChild.firstElementChild.contentWindow.checkDirt(i.event))||!t)&&(i.el.classList.remove("in"),i.animation||i.el.classList.remove("show"),i.calc(1),i.o&&i.o.parentNode&&(i.o.parentNode.removeChild(i.o),i.wrap.style.overflow=""),i.el.timer=setTimeout(function(){clearTimeout(i.el.timer),i.el.parentNode&&i.el.parentNode.removeChild(i.el)},200)):(i.el.classList.remove("in"),i.animation||i.el.classList.remove("show"),i.calc(1),i.o&&i.o.parentNode&&(i.o.parentNode.removeChild(i.o),i.wrap.style.overflow=""),i.el.timer=setTimeout(function(){clearTimeout(i.el.timer),i.el.parentNode&&i.el.parentNode.removeChild(i.el)},200)),"function"==typeof i.onclose&&i.onclose(e,i.el)},calc:function(e){var t=i.wrap.ownerDocument.querySelectorAll("."+i.className+'.in[data-position="'+i.el.dataset.position+'"]');if(t&&t.length){i.els=[];for(var o=0;o<t.length;o++)i.els.push(t[o]);for(i.els.sort(function(e,t){return e.index-t.index}),(i.t=0)===i.position.indexOf("center")?i.t=e?(i.w.innerHeight-i.els[i.els.length-1].offsetHeight)/2-i.mt:(i.w.innerHeight+i.el.offsetHeight)/2:i.t=e?0:i.el.offsetHeight+i.mt,o=i.els.length;o--;)i.wrap.ownerDocument.getElementById(i.els[o].id).index=o-i.els.length,~i.position.indexOf("top")?i.wrap.ownerDocument.getElementById(i.els[o].id).style.top=i.t+"px":i.wrap.ownerDocument.getElementById(i.els[o].id).style.bottom=i.t+"px",i.t+=i.els[o].offsetHeight+i.mt,i.closeall&&i.el!==t[o]&&i.els[o].close()}},onclose:function(e,t){}};for(e in t)t.hasOwnProperty(e)&&void 0!==i[e]&&(i[e]=t[e]);return i.timer=0,i.position=i.position.split(" "),modx.popupLastIndex?i.zIndex=modx.popupLastIndex++:modx.popupLastIndex=i.zIndex,i.uid=t.url?modx.urlToUid(t.url):modx.toHash(t),i.className="evo-popup","string"==typeof i.wrap&&(i.wrap=d.querySelector(i.wrap)),i.w=i.wrap.ownerDocument.defaultView||i.wrap.ownerDocument.parentWindow,i.overlay&&(i.wrap.querySelector(".evo-popup-overlay")?(i.o=i.wrap.querySelector(".evo-popup-overlay"),i.o.style.zIndex=i.zIndex-1):(i.o=d.createElement("div"),i.o.className="evo-popup-overlay",i.o.style.zIndex=i.zIndex-1,i.wrap.appendChild(i.o),i.wrap.style.overflow="hidden")),i.el=i.wrap.ownerDocument.getElementById("evo-popup-"+i.uid),i.el?(clearTimeout(i.el.timer),i.el.index=0,i.el.classList.remove("in"),i.el.classList.add("show"),i.el.style.zIndex=i.zIndex,i.el.dataset.position=i.position.join(":"),i.mt=parseFloat(getComputedStyle(i.el).marginTop),i.el.close=i.close,i.show()):(i.el=d.createElement("div"),i.el.id="evo-popup-"+i.uid,i.el.close=i.close,i.el.index=0,i.el.style.position="fixed",i.el.style.width=/[^[0-9]/.test(i.width)?i.width:i.width+"px",i.el.style.height=/[^[0-9]/.test(i.height)?i.height:i.height+"px",i.el.style.zIndex=i.zIndex,i.el.style.margin=i.margin,i.el.className=i.className+" show alert alert-"+i.type+" "+i.addclass+(i.animation?" animation "+i.animation:""),i.el.dataset.position=i.position.join(":"),i.showclose&&(i.el.innerHTML+='<div class="evo-popup-close close">&times;</div>'),i.title&&(i.header=document.createElement("div"),"none"!==i.icon&&(i.header.innerHTML+='<i class="fa fa-fw '+(i.icon||"fa-"+i.type)+'"></i>'),i.header.innerHTML+=i.title,i.header.className="evo-popup-header",i.el.appendChild(i.header)),i.el.innerHTML+='<div class="evo-popup-body"></div>',i.wrap.appendChild(i.el),i.mt=parseFloat(getComputedStyle(i.el).marginTop),i.maxheight&&(i.maxheight=/(%)/.test(i.maxheight)?(i.w.innerHeight-i.el.offsetHeight-i.mt)/100*parseInt(i.maxheight):i.maxheight,i.el.lastChild.style.overflowY="auto",i.el.lastChild.style.maxHeight=i.maxheight+"px"),i.url?(i.draggable=1,"iframe"===i.iframe?(i.resize=1,i.uid=modx.urlToUid(t.url),i.el.className+=" "+i.addclass+" "+i.className+"-iframe",i.el.id="evo-popup-"+i.uid,d.getElementById("mainloader").className="show",i.frame=d.createElement("iframe"),i.frame.width="100%",i.frame.height="100%",i.frame.frameBorder="0",i.frame.src=i.url,i.frame.onload=function(e){e.target.contentWindow.opener=i.w,t.url=e.target.contentWindow.location.href,i.uid=modx.urlToUid(t.url),(i.event=e).target.contentWindow.__alertQuit?(modx.popup({type:"warning",title:"MODX :: Alert",position:"top center alertQuit",content:e.target.contentWindow.document.body.querySelector("p").innerHTML}),e.target.contentWindow.document.body.innerHTML="",e.target.contentWindow.alert=function(){}):modx.getActionFromUrl(t.url,2)||1<i.wrap.querySelectorAll("#evo-popup-"+i.uid).length?i.el.close():(e.target.contentDocument.querySelectorAll("h1")[0]?t.title=e.target.contentDocument.querySelectorAll("h1")[0].innerHTML:e.target.contentDocument.title&&(t.title=e.target.contentDocument.title),i.header&&(e.target.offsetParent.offsetParent.getElementsByClassName(i.header.className)[0].innerHTML=t.title),e.target.offsetParent.offsetParent.id="evo-popup-"+i.uid,e.target.offsetParent.offsetParent.classList.remove("changed")),e.target.contentWindow.close=i.close,modx.main.stopWork()},i.el.lastChild.appendChild(i.frame),i.show()):((o=new XMLHttpRequest).open(i.method,i.url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),o.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),i.dataType&&(o.responseType=i.dataType),o.onload=function(){var e;4===this.readyState&&(i.el.className+=" "+i.className+"-ajax","document"===i.dataType?i.selector?(e=this.response.documentElement.querySelector(i.selector))&&(i.el.lastChild.innerHTML+=e.innerHTML):i.el.lastChild.innerHTML+=this.response.body.innerHTML:i.el.lastChild.innerHTML+=this.response,i.show())},o.send(i.data))):(i.el.lastChild.innerHTML+=i.content,i.show())),i}},getWindowDimension:function(){var e=0,t=0,o=d.documentElement,i=d.body;return"number"==typeof w.innerWidth?(e=w.innerWidth,t=w.innerHeight):o&&(o.clientWidth||o.clientHeight)?(e=o.clientWidth,t=o.clientHeight):i&&(i.clientWidth||i.clientHeight)&&(e=i.clientWidth,t=i.clientHeight),{width:e,height:t}},hideDropDown:function(e){var t,o;e=e||w.event||w.main.event,"open"!==tree.ca&&""!==tree.ca||modx.tree.setSelectedByContext(),null!==modx.tree.ctx&&(d.getElementById(modx.frameset).removeChild(modx.tree.ctx),modx.tree.ctx=null),/dropdown\-item/.test(e.target.className)||(t=d.querySelectorAll(".dropdown.show"),o=null,void 0!==(e=e.target||e.target.parentNode).dataset.toggle?o=d.querySelector(e.dataset.toggle):e.classList.contains("dropdown-toggle")&&(o=e.offsetParent),t.forEach(function(e){o!==e&&e.classList.remove("show")}),(t=w.main&&w.main.document.querySelectorAll(".dropdown.show")||[]).forEach(function(e){o!==e&&e.classList.remove("show")}))},XHR:function(){return"XMLHttpRequest"in w?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},get:function(e,t,o){var i=this.XHR();i.open("GET",e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o&&(i.responseType=o),i.onload=function(){if(200===this.status&&"function"==typeof t)return t(this.response)},i.send()},post:function(e,t,o,i){var s=this.XHR(),n="";if("function"==typeof t)i=o,o=t;else if("object"==typeof t){var a,r=[],l=0;for(a in t)t.hasOwnProperty(a)&&(r[l++]=a+"="+t[a]);n=r.join("&")}else"string"==typeof t&&(n=t);s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),i&&(s.responseType=i),s.onload=function(){if(4===this.readyState&&o!==u)return o(this.response)},s.send(n)},pxToRem:function(e){return e/parseInt(w.getComputedStyle(d.documentElement).fontSize)},remToPx:function(e){return e*parseInt(w.getComputedStyle(d.documentElement).fontSize)},toHash:function(e){var t,o=0;if(0===(e=String(JSON.stringify(e))).length)return o;for(t=0;t<e.length;t++)o=(o<<5)-o+e.charCodeAt(t),o&=o;return Math.abs(o).toString()},urlToUid:function(e){var t,o="";return(e=(e=e.split("?"))[1]||e[0])&&((t=modx.getActionFromUrl(e))&&(modx.typesactions[t]?o+="&type="+modx.typesactions[t]:o+="&a="+t),modx.main.getQueryVariable("id",e)&&(o+="&id="+modx.main.getQueryVariable("id",e)),modx.main.getQueryVariable("type",e)&&(o+="&type="+modx.main.getQueryVariable("type",e)),o=modx.toHash(o)),o},getActionFromUrl:function(e,t){return void 0!==t?parseInt(modx.main.getQueryVariable("a",e))===parseInt(t):parseInt(modx.main.getQueryVariable("a",e))},getLockedElements:function(e,t,o){modx.typesactions[e]&&t&&modx.post(modx.MODX_MANAGER_URL+"media/style/"+modx.config.theme+"/ajax.php",{a:"getLockedElements",id:modx.main.getQueryVariable("id",w.main.location.search),type:modx.typesactions[modx.getActionFromUrl(w.main.location.search)]},o)},dragging:function(e,t){return this.dragging.init=function(e,t){var o={resize:!1,minWidth:50,minHeight:50,wrap:document,opacity:"0.65",classDrag:"drag",classResize:"resize",handler:"",onstart:function(e,t){},onstop:function(e,t){},ondrag:function(e,t){},onresize:function(e,t){}},i={x:0,y:0,elmX:0,elmY:0,border:5,isdrag:!1,isresize:!1,onTop:0,onLeft:0,onRight:0,onBottom:0,handlerHeight:e.offsetHeight,borders:document.createElement("div")},s=modx.extend(this,o,t,i);this.el=e,this.borders.className="border-outline",this.borders.innerHTML='<i class="bo-left"></i><i class="bo-top"></i><i class="bo-right"></i><i class="bo-bottom"></i>',this.classDrag&&this.el.classList.add(this.classDrag),this.classResize&&this.el.classList.add(this.classResize),this.el.insertBefore(this.borders,this.el.firstChild),this.handler&&this.el.getElementsByClassName(this.handler)[0]&&(this.handler=this.el.getElementsByClassName(this.handler)[0],this.handlerHeight=this.handler.offsetHeight),this.el.onmousedown=function(e){s.mousedown(e)},this.el.ontouchstart=function(e){s.mousedown(e.changedTouches[0])},this.wrap.addEventListener("mousemove",function(e){s.calc(e)},!1),this.wrap.addEventListener("touchmove",function(e){s.calc(e.changedTouches[0])},!1)},this.dragging.init.prototype={mousedown:function(e){var t,o,i,s;e.target.classList.contains("close")||(e=document.all?window.event:e,t=this,o=(document.all?window.event:e).clientX,i=(document.all?window.event:e).clientY,s=w.getComputedStyle(this.el),this.elmX=o-this.el.offsetLeft+parseInt(s.marginLeft),this.elmY=i-this.el.offsetTop+parseInt(s.marginTop),this.el.position=this.el.getBoundingClientRect(),this.el.style.position="fixed",this.el.style.transitionDuration="0s",this.el.style.webkitTransitionDuration="0s",this.el.style.left=this.el.offsetLeft-parseInt(s.marginLeft)+"px",this.el.style.top=this.el.offsetTop-parseInt(s.marginTop)+"px",this.el.style.right="auto",this.el.style.bottom="auto",this.el.style.width=this.el.position.width+"px",this.el.style.height=this.el.position.height+"px",e.target.parentNode===this.borders?(this.isresize=this.resize,this.el.classList.add("is-resize")):(!this.handler||this.handler&&e.target===this.handler)&&(this.isdrag=!0,this.el.classList.add("is-drag")),"function"==typeof this.start&&this.onstart(e,this.el),e.preventDefault?e.preventDefault():document.onselectstart=function(){return!1},this.wrap.onmousemove=function(e){t.mousemove(e)},this.wrap.ontouchmove=function(e){t.mousemove(e.changedTouches[0]),e.stopPropagation()},this.wrap.onmouseup=function(e){t.mouseup(e)},this.wrap.ontouchend=function(e){t.mouseup(e.changedTouches[0]),e.stopPropagation()})},mousemove:function(e){var t,o=(document.all?window.event:e).clientX,i=(document.all?window.event:e).clientY;this.isresize?(this.onRight&&(this.el.style.width=Math.max(o-this.el.position.left+(this.el.position.width-this.x),this.minWidth)+"px"),this.onBottom&&(this.el.style.height=Math.max(i-this.el.position.top+(this.el.position.height-this.y),this.minHeight)+"px"),this.onLeft&&(this.width=Math.max(this.el.position.left-o+this.el.position.width+this.x,this.minWidth),this.width>this.minWidth&&(this.el.style.width=this.width+"px",this.el.style.left=o-this.elmX+"px")),!this.onTop||(t=Math.max(this.el.position.top-i+this.el.position.height+this.y,this.minHeight))>this.minHeight&&(this.el.style.height=t+"px",this.el.style.top=i-this.elmY+"px"),"function"==typeof this.onresize&&this.onresize(e,this.el)):this.isdrag&&(this.el.style.opacity=this.opacity,this.el.style.left=o-this.elmX+"px",this.el.style.top=i-this.elmY+"px","function"==typeof this.drag&&this.ondrag(e,this.el))},mouseup:function(e){(this.isdrag||this.isresize)&&(this.el.classList.remove("is-resize"),this.el.classList.remove("is-drag"),this.el.style.opacity="",this.el.style.transitionDuration="",this.el.style.webkitTransitionDuration="",this.el.position=this.el.getBoundingClientRect(),this.isdrag=!1,this.isresize=!1,this.wrap.onmousemove=null,this.wrap.onselectstart=null,"function"==typeof this.stop&&this.onstop(e,this.el))},calc:function(e){this.isresize||this.isdrag||(this.x=e.clientX-this.el.offsetLeft,this.y=e.clientY-this.el.offsetTop,this.resize?(this.onTop=this.y<this.border,this.onLeft=this.x<this.border,this.onRight=this.x>=this.el.offsetWidth-this.border,this.onBottom=this.y>=this.el.offsetHeight-this.border,this.onRight&&this.onBottom||this.onLeft&&this.onTop?this.el.style.cursor="nwse-resize":this.onRight&&this.onTop||this.onBottom&&this.onLeft?this.el.style.cursor="nesw-resize":this.onRight||this.onLeft?this.el.style.cursor="ew-resize":this.onBottom||this.onTop?this.el.style.cursor="ns-resize":0<this.x&&0<this.y&&this.x<this.el.offsetWidth&&this.y<=this.handlerHeight&&this.y>=this.border?this.el.style.cursor="move":this.el.style.cursor="default"):0<this.x&&0<this.y&&this.x<this.el.offsetWidth&&this.y<=this.handlerHeight&&this.y>=this.border&&(this.el.style.cursor="move"))}},new this.dragging.init(e,t)},setTypeIcon:function(e){var t="";switch(this.typesactions[e]){case 1:t="fa fa-newspaper-o";break;case 2:t="fa fa-list-alt";break;case 3:t="fa fa-th-large";break;case 4:t="fa fa-code";break;case 5:t="fa fa-plug";break;case 6:t="fa fa-cube";break;case 7:t="fa fa-pencil-square-o";break;default:t="fa fa-circle"}return t},animate:function(n,a,r,l){if(n&&a&&"object"==typeof a){var e="px";"function"==typeof r&&(l=r,r=null),r=r||64,l="function"!=typeof l?function(){}:l;var t,o,i=getComputedStyle(n);for(t in a)a.hasOwnProperty(t)&&("opacity"===t&&(e=""),o=i[t],"scrollLeft"===t?o=n.scrollLeft:"scrollTop"===t&&(o=n.scrollTop),a[t]={start:parseInt(o),end:a[t],unit:e});var d=performance.now();requestAnimationFrame(function e(t){var o,i,s=(t<d?d-t:t-d)/r;for(o in 1<s&&(s=1),a)a.hasOwnProperty(o)&&(i=a[o].start+(a[o].end-a[o].start)*s,"scrollLeft"===o?n.scrollLeft=i:"scrollTop"===o?n.scrollTop=i:n.style[o]=i+a[o].unit);s<1?requestAnimationFrame(e):l.call(n)})}}}),w.mainMenu={},w.mainMenu.stopWork=function(){modx.main.stopWork()},w.mainMenu.work=function(){modx.main.work()},w.mainMenu.reloadtree=function(){modx.plugins.ElementsInTree&&setTimeout("reloadElementsInTree()",50),modx.config.global_tabs&&setTimeout("modx.tree.restoreTree()",100)},w.mainMenu.startrefresh=function(e){9===e&&modx.tree.restoreTree(),10===e&&(w.location.href=modx.MODX_MANAGER_URL)},w.mainMenu.startmsgcount=function(e,t,o){modx.updateMail(o)},w.mainMenu.hideTreeFrame=function(){modx.resizer.setWidth(0)},w.mainMenu.defaultTreeFrame=function(){modx.resizer.setDefaultWidth()},w.tree={},w.tree.ca="open",w.tree.document=document,w.tree.saveFolderState=function(){},w.tree.updateTree=function(){modx.tree.updateTree()},w.tree.restoreTree=function(){modx.tree.restoreTree()},w.tree.resizeTree=function(){},w.onbeforeunload=function(){var e=w.main.frameElement.contentWindow;modx.getActionFromUrl(e.location.search,27)&&modx.get(modx.MODX_MANAGER_URL+"?a=67&type=7&id="+modx.main.getQueryVariable("id",e.location.search.substring(1)))},d.addEventListener("DOMContentLoaded",function(){modx.init()})}(window,document,void 0),Element.prototype.closest||(Element.prototype.closest=function(e){var t,o,i=this;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(t=e,!0)}),i&&t&&i[t](e))return i;for(;i;){if((o=i.parentElement)&&t&&o[t](e))return o;i=o}return null}),function(s,e){var t=window.Element.prototype,n=t.matches;n||["webkit","ms","moz"].some(function(e){e+="MatchesSelector";if(t.hasOwnProperty(e))return n=t[e],!0}),e.prototype.delegateEventListener=function(e,t,o){this.addEventListener(e,function(i){var e=function(e,t){for(var o=i.target;;){if(n.call(o,e))return o;if(o===t||o===s.body)return!1;o=o.parentNode}}(t,i.currentTarget);e&&o.call(e,i)})}}(window.document,window.EventTarget||window.Element);
